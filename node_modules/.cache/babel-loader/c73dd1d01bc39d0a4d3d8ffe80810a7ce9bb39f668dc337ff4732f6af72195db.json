{"ast":null,"code":"import React,{useState}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateRecipeModal=_ref=>{let{open,onClose,token,onCreated}=_ref;const[title,setTitle]=useState('');const[image,setImage]=useState('');const[calories,setCalories]=useState('');const[ingredientsText,setIngredientsText]=useState('');const[saving,setSaving]=useState(false);const[error,setError]=useState(null);if(!open)return null;const handleSave=async()=>{setError(null);if(!title.trim()){setError('Title is required');return;}const ingredients=ingredientsText.split('\\n').map(l=>l.trim()).filter(Boolean).map(text=>({text}));const payload={title:title.trim(),image:image.trim()||null,calories:calories?Number(calories):null,ingredients};try{setSaving(true);const headers={'Content-Type':'application/json'};if(token)headers.Authorization=\"Bearer \".concat(token);const res=await fetch('/api/recipes',{method:'POST',headers,body:JSON.stringify(payload)});if(!res.ok){const body=await res.json().catch(()=>({}));throw new Error(body.error||'Failed to save recipe');}const data=await res.json();onCreated&&onCreated(data);// reset form\nsetTitle('');setImage('');setCalories('');setIngredientsText('');onClose();}catch(err){setError(err.message||'Network error');}finally{setSaving(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal-backdrop\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Recipe\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:onClose,children:\"Close\"})})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'#ffb3b3',marginBottom:8},children:error}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Image URL\",value:image,onChange:e=>setImage(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Calories\",value:calories,onChange:e=>setCalories(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Ingredients (one per line)\",value:ingredientsText,onChange:e=>setIngredientsText(e.target.value),rows:6}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:onClose,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:handleSave,disabled:saving,children:saving?'Saving...':'Create'})]})]})]})});};export default CreateRecipeModal;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","CreateRecipeModal","_ref","open","onClose","token","onCreated","title","setTitle","image","setImage","calories","setCalories","ingredientsText","setIngredientsText","saving","setSaving","error","setError","handleSave","trim","ingredients","split","map","l","filter","Boolean","text","payload","Number","headers","Authorization","concat","res","fetch","method","body","JSON","stringify","ok","json","catch","Error","data","err","message","className","onClick","children","e","stopPropagation","style","display","justifyContent","alignItems","color","marginBottom","gap","placeholder","value","onChange","target","rows","disabled"],"sources":["e:/Recipe-Haven---Food-Recipe-App.-main/src/CreateRecipeModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './App.css';\r\n\r\nconst CreateRecipeModal = ({ open, onClose, token, onCreated }) => {\r\n  const [title, setTitle] = useState('');\r\n  const [image, setImage] = useState('');\r\n  const [calories, setCalories] = useState('');\r\n  const [ingredientsText, setIngredientsText] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  if (!open) return null;\r\n\r\n  const handleSave = async () => {\r\n    setError(null);\r\n    if (!title.trim()) {\r\n      setError('Title is required');\r\n      return;\r\n    }\r\n\r\n    const ingredients = ingredientsText\r\n      .split('\\n')\r\n      .map((l) => l.trim())\r\n      .filter(Boolean)\r\n      .map((text) => ({ text }));\r\n\r\n    const payload = {\r\n      title: title.trim(),\r\n      image: image.trim() || null,\r\n      calories: calories ? Number(calories) : null,\r\n      ingredients,\r\n    };\r\n\r\n    try {\r\n      setSaving(true);\r\n      const headers = { 'Content-Type': 'application/json' };\r\n      if (token) headers.Authorization = `Bearer ${token}`;\r\n\r\n      const res = await fetch('/api/recipes', { method: 'POST', headers, body: JSON.stringify(payload) });\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => ({}));\r\n        throw new Error(body.error || 'Failed to save recipe');\r\n      }\r\n\r\n      const data = await res.json();\r\n      onCreated && onCreated(data);\r\n      // reset form\r\n      setTitle('');\r\n      setImage('');\r\n      setCalories('');\r\n      setIngredientsText('');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err.message || 'Network error');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"modal-backdrop\" onClick={onClose}>\r\n      <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>\r\n          <h3>Create Recipe</h3>\r\n          <div>\r\n            <button className=\"btn\" onClick={onClose}>Close</button>\r\n          </div>\r\n        </div>\r\n\r\n        {error && <div style={{color:'#ffb3b3',marginBottom:8}}>{error}</div>}\r\n\r\n        <div style={{display:'grid',gap:8}}>\r\n          <input placeholder=\"Title\" value={title} onChange={(e)=>setTitle(e.target.value)} />\r\n          <input placeholder=\"Image URL\" value={image} onChange={(e)=>setImage(e.target.value)} />\r\n          <input placeholder=\"Calories\" value={calories} onChange={(e)=>setCalories(e.target.value)} />\r\n          <textarea placeholder=\"Ingredients (one per line)\" value={ingredientsText} onChange={(e)=>setIngredientsText(e.target.value)} rows={6} />\r\n          <div style={{display:'flex',gap:8,justifyContent:'flex-end'}}>\r\n            <button className=\"btn\" onClick={onClose}>Cancel</button>\r\n            <button className=\"btn\" onClick={handleSave} disabled={saving}>{saving ? 'Saving...' : 'Create'}</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateRecipeModal;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnB,KAAM,CAAAC,iBAAiB,CAAGC,IAAA,EAAyC,IAAxC,CAAEC,IAAI,CAAEC,OAAO,CAAEC,KAAK,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CAC5D,KAAM,CAACK,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACa,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACe,QAAQ,CAAEC,WAAW,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACiB,eAAe,CAAEC,kBAAkB,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACmB,MAAM,CAAEC,SAAS,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACqB,KAAK,CAAEC,QAAQ,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAExC,GAAI,CAACO,IAAI,CAAE,MAAO,KAAI,CAEtB,KAAM,CAAAgB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7BD,QAAQ,CAAC,IAAI,CAAC,CACd,GAAI,CAACX,KAAK,CAACa,IAAI,CAAC,CAAC,CAAE,CACjBF,QAAQ,CAAC,mBAAmB,CAAC,CAC7B,OACF,CAEA,KAAM,CAAAG,WAAW,CAAGR,eAAe,CAChCS,KAAK,CAAC,IAAI,CAAC,CACXC,GAAG,CAAEC,CAAC,EAAKA,CAAC,CAACJ,IAAI,CAAC,CAAC,CAAC,CACpBK,MAAM,CAACC,OAAO,CAAC,CACfH,GAAG,CAAEI,IAAI,GAAM,CAAEA,IAAK,CAAC,CAAC,CAAC,CAE5B,KAAM,CAAAC,OAAO,CAAG,CACdrB,KAAK,CAAEA,KAAK,CAACa,IAAI,CAAC,CAAC,CACnBX,KAAK,CAAEA,KAAK,CAACW,IAAI,CAAC,CAAC,EAAI,IAAI,CAC3BT,QAAQ,CAAEA,QAAQ,CAAGkB,MAAM,CAAClB,QAAQ,CAAC,CAAG,IAAI,CAC5CU,WACF,CAAC,CAED,GAAI,CACFL,SAAS,CAAC,IAAI,CAAC,CACf,KAAM,CAAAc,OAAO,CAAG,CAAE,cAAc,CAAE,kBAAmB,CAAC,CACtD,GAAIzB,KAAK,CAAEyB,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAa3B,KAAK,CAAE,CAEpD,KAAM,CAAA4B,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,cAAc,CAAE,CAAEC,MAAM,CAAE,MAAM,CAAEL,OAAO,CAAEM,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACV,OAAO,CAAE,CAAC,CAAC,CACnG,GAAI,CAACK,GAAG,CAACM,EAAE,CAAE,CACX,KAAM,CAAAH,IAAI,CAAG,KAAM,CAAAH,GAAG,CAACO,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CAC/C,KAAM,IAAI,CAAAC,KAAK,CAACN,IAAI,CAACnB,KAAK,EAAI,uBAAuB,CAAC,CACxD,CAEA,KAAM,CAAA0B,IAAI,CAAG,KAAM,CAAAV,GAAG,CAACO,IAAI,CAAC,CAAC,CAC7BlC,SAAS,EAAIA,SAAS,CAACqC,IAAI,CAAC,CAC5B;AACAnC,QAAQ,CAAC,EAAE,CAAC,CACZE,QAAQ,CAAC,EAAE,CAAC,CACZE,WAAW,CAAC,EAAE,CAAC,CACfE,kBAAkB,CAAC,EAAE,CAAC,CACtBV,OAAO,CAAC,CAAC,CACX,CAAE,MAAOwC,GAAG,CAAE,CACZ1B,QAAQ,CAAC0B,GAAG,CAACC,OAAO,EAAI,eAAe,CAAC,CAC1C,CAAC,OAAS,CACR7B,SAAS,CAAC,KAAK,CAAC,CAClB,CACF,CAAC,CAED,mBACElB,IAAA,QAAKgD,SAAS,CAAC,gBAAgB,CAACC,OAAO,CAAE3C,OAAQ,CAAA4C,QAAA,cAC/ChD,KAAA,QAAK8C,SAAS,CAAC,OAAO,CAACC,OAAO,CAAGE,CAAC,EAAKA,CAAC,CAACC,eAAe,CAAC,CAAE,CAAAF,QAAA,eACzDhD,KAAA,QAAKmD,KAAK,CAAE,CAACC,OAAO,CAAC,MAAM,CAACC,cAAc,CAAC,eAAe,CAACC,UAAU,CAAC,QAAQ,CAAE,CAAAN,QAAA,eAC9ElD,IAAA,OAAAkD,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBlD,IAAA,QAAAkD,QAAA,cACElD,IAAA,WAAQgD,SAAS,CAAC,KAAK,CAACC,OAAO,CAAE3C,OAAQ,CAAA4C,QAAA,CAAC,OAAK,CAAQ,CAAC,CACrD,CAAC,EACH,CAAC,CAEL/B,KAAK,eAAInB,IAAA,QAAKqD,KAAK,CAAE,CAACI,KAAK,CAAC,SAAS,CAACC,YAAY,CAAC,CAAC,CAAE,CAAAR,QAAA,CAAE/B,KAAK,CAAM,CAAC,cAErEjB,KAAA,QAAKmD,KAAK,CAAE,CAACC,OAAO,CAAC,MAAM,CAACK,GAAG,CAAC,CAAC,CAAE,CAAAT,QAAA,eACjClD,IAAA,UAAO4D,WAAW,CAAC,OAAO,CAACC,KAAK,CAAEpD,KAAM,CAACqD,QAAQ,CAAGX,CAAC,EAAGzC,QAAQ,CAACyC,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACpF7D,IAAA,UAAO4D,WAAW,CAAC,WAAW,CAACC,KAAK,CAAElD,KAAM,CAACmD,QAAQ,CAAGX,CAAC,EAAGvC,QAAQ,CAACuC,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cACxF7D,IAAA,UAAO4D,WAAW,CAAC,UAAU,CAACC,KAAK,CAAEhD,QAAS,CAACiD,QAAQ,CAAGX,CAAC,EAAGrC,WAAW,CAACqC,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cAC7F7D,IAAA,aAAU4D,WAAW,CAAC,4BAA4B,CAACC,KAAK,CAAE9C,eAAgB,CAAC+C,QAAQ,CAAGX,CAAC,EAAGnC,kBAAkB,CAACmC,CAAC,CAACY,MAAM,CAACF,KAAK,CAAE,CAACG,IAAI,CAAE,CAAE,CAAE,CAAC,cACzI9D,KAAA,QAAKmD,KAAK,CAAE,CAACC,OAAO,CAAC,MAAM,CAACK,GAAG,CAAC,CAAC,CAACJ,cAAc,CAAC,UAAU,CAAE,CAAAL,QAAA,eAC3DlD,IAAA,WAAQgD,SAAS,CAAC,KAAK,CAACC,OAAO,CAAE3C,OAAQ,CAAA4C,QAAA,CAAC,QAAM,CAAQ,CAAC,cACzDlD,IAAA,WAAQgD,SAAS,CAAC,KAAK,CAACC,OAAO,CAAE5B,UAAW,CAAC4C,QAAQ,CAAEhD,MAAO,CAAAiC,QAAA,CAAEjC,MAAM,CAAG,WAAW,CAAG,QAAQ,CAAS,CAAC,EACtG,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAd,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}